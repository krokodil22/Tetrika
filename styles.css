/* ===== Базовая стилизация ===== */
:root{
  --tile: 120px;
  --accent: #3c71e8;
  --bg: #f7f9fc;
}

*{ box-sizing: border-box; }
body{ margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial; background: var(--bg); color:#111827; }

.topbar{ display:flex; gap:24px; align-items:center; justify-content:space-between; padding:12px 16px; background:white; border-bottom:1px solid #e5e7eb; position:sticky; top:0; z-index:10; }
.topbar h1{ font-size: clamp(18px, 2.2vw, 24px); margin:0; }
.controls-top{ display:flex; gap:14px; flex-wrap:wrap; font-size:14px; }

.layout{ display:grid; grid-template-columns: minmax(320px, 1fr) 380px; gap:18px; padding:16px; max-width:1200px; margin:0 auto; }
@media (max-width: 980px){ .layout{ grid-template-columns:1fr; } }

.board-wrapper{ display:flex; flex-direction:column; gap:10px; }
.board{ position:relative; background:#b5e0a5; border:8px solid white; border-radius:14px; box-shadow:0 6px 18px rgba(0,0,0,.08); overflow:hidden; width:fit-content; }
.level-bg{ display:block; width:100%; height:100%; object-fit:cover; user-select:none; pointer-events:none; }
.grid{ position:absolute; inset:0; display:grid; grid-template-columns:repeat(var(--cols), var(--tile)); grid-template-rows:repeat(var(--rows), var(--tile)); pointer-events:none; }
.grid .cell{ border:1px dashed rgba(0,0,0,.14); }
.grid .blocked{ background: repeating-linear-gradient(45deg, rgba(220,20,60,.18) 0 6px, rgba(220,20,60,.28) 6px 12px); }

.actor,.goal{ position:absolute; width:var(--tile); height:var(--tile); background-size:contain; background-repeat:no-repeat; background-position:center; transform-origin:50% 50%; }
.actor{ transition: transform var(--moveMs, 400ms) linear, left var(--moveMs, 400ms) linear, top var(--moveMs, 400ms) linear; filter: drop-shadow(0 6px 6px rgba(0,0,0,.2)); }
.goal{ filter: drop-shadow(0 4px 4px rgba(0,0,0,.25)); }

.board-actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
button{ border:none; border-radius:10px; padding:10px 14px; background:#e5e7eb; font-weight:600; cursor:pointer; transition:transform .05s ease, box-shadow .2s ease; }
button:hover{ transform: translateY(-1px); }
button.primary{ background: var(--accent); color:white; }

.sidebar{ background:white; border:1px solid #e5e7eb; border-radius:14px; padding:16px; box-shadow:0 6px 16px rgba(0,0,0,.06); }
.sidebar h2{ margin:10px 0 8px; font-size:18px; }

.toolbox{ display:flex; flex-direction:column; gap:10px; }
.block{ padding:10px 12px; border-radius:12px; border:2px solid #111827; font-weight:700; width:100%; user-select:none; box-shadow: 0 3px 0 #111827; background:#eef2ff; }
.block.move{ background:#dcfce7; }
.block.right{ background:#fff7ed; }
.block.left{ background:#f3e8ff; }
.block:active{ transform: translateY(1px); box-shadow: 0 1px 0 #111827; }

.program{ min-height:140px; background:#fafafa; border:2px dashed #d1d5db; border-radius:12px; padding:10px; list-style:none; display:flex; flex-direction:column; gap:8px; }
.program .item{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:8px 10px; border-radius:12px; border:2px solid #111827; background:white; box-shadow: 0 3px 0 #111827; }
.program .item.drag-over{ outline: 2px dashed var(--accent); outline-offset: 2px; }
.program .ops{ display:flex; gap:8px; }
.program .ops button{ padding:6px 8px; border-radius:8px; }

.foot{ padding:18px; color:#6b7280; text-align:center; font-size:13px; }
