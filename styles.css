/* ===== –°—Ç–∏–ª–∏ –∏–≥—Ä—ã v30 ===== */
:root{
  --accent: #6e45d9;
  --tileX: 100px; --tileY: 100px;
  --actorScale: 0.8;
  --progItemH: 44px; --progGap: 8px;
}
*{ box-sizing:border-box; }
html, body{ height:100%; }
body{ margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial; color:#111827; background:#f7f9fc; }
.topbar{ position:sticky; top:0; z-index:10; display:flex; justify-content:space-between; align-items:center; gap:16px; padding:10px 16px; background:white; border-bottom:1px solid #e5e7eb; }
.brand{ display:flex; align-items:center; gap:12px; }
.logo{ width:40px; height:40px; object-fit:contain; }
.topbar h1{ font-size: clamp(18px, 2.4vw, 26px); margin:0; color:#4b5563; }

.level-menu{ display:flex; gap:8px; flex-wrap:wrap; }
.level-menu button{ position:relative; border:none; border-radius:999px; padding:6px 12px; font-weight:700; cursor:pointer; background:#e5e7eb; }
.level-menu button.active{ background: var(--accent); color:white; }
.level-menu button.locked{ opacity:0.45; cursor:not-allowed; }
.level-menu button.locked::after{ content: "üîí"; position:absolute; right:-8px; top:-8px; font-size:14px; }

.layout{ display:grid; grid-template-columns: minmax(420px, 1fr) 520px; gap:18px; padding:16px; max-width: 1600px; margin:0 auto; }
@media (max-width: 1100px){ .layout{ grid-template-columns: 1fr; } }

.left-pane{ display:flex; flex-direction:column; gap:10px; align-items:flex-start; }
.top-actions{ margin-bottom:6px; }
.board-actions{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
button{ border:none; border-radius:10px; padding:10px 14px; background:#e5e7eb; font-weight:600; cursor:pointer; transition:transform .05s ease; }
button:hover{ transform: translateY(-1px); }
button.primary{ background: var(--accent); color:white; }
.status{ font-weight:600; margin-left:6px; min-height:1em; color:#374151; }

.board{ position: relative; border-radius: 14px; overflow:hidden; background:#0000; }
.level-bg{ display:block; width:100%; height:auto; object-fit:contain; user-select:none; pointer-events:none; }

.actor{
  position:absolute;
  width: calc(var(--tileX) * var(--actorScale));
  height: calc(var(--tileY) * var(--actorScale));
  background-image:url("assets/hero.png"); background-size:contain; background-repeat:no-repeat; background-position:center;
  transform-origin:50% 50%;
  transition: transform var(--moveMs, 400ms) linear, left var(--moveMs, 400ms) linear, top var(--moveMs, 400ms) linear;
  filter: drop-shadow(0 6px 6px rgba(0,0,0,.2));
}

/* –£—Å–ø–µ—Ö –∏ –æ—à–∏–±–∫–∞ */
.success, .oops{ position:absolute; inset: 0; display:flex; align-items:center; justify-content:center; text-align:center; }
.success{ flex-direction:column; gap:14px; background: rgba(255,255,255,0.85); }
.oops{ background: rgba(255,0,0,0.10); font-weight:800; color:#b91c1c; font-size:22px; }
.hidden{ display:none; }
.success-text{ font-weight:800; font-size: 22px; color:#111827; }

/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å */
.right-pane{ display:grid; grid-template-columns: 200px 1fr; gap:16px; align-items:start; }
.commands-column{ position: sticky; top: calc(56px + 16px); align-self:start; }
.right-pane h2{ margin:6px 0 10px; font-size:18px; }
.toolbox{ display:flex; flex-direction:column; gap:10px; }
.block{ padding:10px 12px; border-radius:12px; border:2px solid #111827; font-weight:700; user-select:none; width:100%; box-shadow:0 3px 0 #111827; }
.block.move{ background:#dcfce7; }
.block.right{ background:#fff7ed; }
.block.left{ background:#f3e8ff; }
.block:active{ transform: translateY(1px); box-shadow:0 1px 0 #111827; }

/* –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å–æ —Å–∫—Ä–æ–ª–ª–æ–º */
.program-column{ min-height: 60vh; }
.program{
  height: calc(100vh - 190px); max-height: calc(100vh - 190px);
  overflow-y:auto; background:#fafafa; border:2px dashed #d1d5db; border-radius:12px;
  padding:10px; list-style:none; display:flex; flex-direction:column; gap: var(--progGap);
  padding-bottom: calc(var(--progItemH) * 2 + var(--progGap) * 3);
}
.program .item{ display:flex; align-items:center; justify-content:space-between; gap:10px; padding:8px 10px; border-radius:12px; border:2px solid #111827; background:white; box-shadow:0 3px 0 #111827; cursor:grab; }
.program .item:active{ cursor:grabbing; }
.program .ops button{ padding:6px 8px; border-radius:8px; }
.program .placeholder{ height: 44px; border: 2px dashed var(--accent); border-radius: 12px; background: repeating-linear-gradient(45deg, #f3e8ff 0 10px, #fff 10px 20px); box-shadow:none; }
.program .spacer{ height: calc(var(--progItemH) * 2 + var(--progGap) * 3); pointer-events:none; }
.hint{ margin-top:8px; color:#6b7280; font-size:13px; }

/* v31: hide helper hint */
.hint{ display:none !important; }
